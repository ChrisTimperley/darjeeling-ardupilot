#!/bin/bash
build_image_for_branch() {
  branch=${1}
  image="trmo/ardupilot:${branch}"
  git checkout ${branch} && docker build -t ${image} .
}

DIR_ARDUPILOT=$(mktemp -d)

# todo: use loop
   pushd "${DIR_ARDUPILOT}" \
&& git clone git@gitlab.eecs.umich.edu:wrg-code/ardupilot "${DIR_ARDUPILOT}" \
&& build_image_for_branch ground-truth \
&& build_image_for_branch armv7l-ported-segmentation \
&& build_image_for_branch armv7l-logic-bug \
&& build_image_for_branch red-poster

rm -rf "${DIR_ARDUPILOT}"
